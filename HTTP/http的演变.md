# HTTP的发展

> **HTTP（**HyperText Transfer Protocol）是万维网（World Wide Web）的基础协议。	



## 万维网的发明

起初只是一位博士写了一份关于建立一个通过网络传输超文本系统的报告。这个系统被命名为 *Mesh* , 之后在**1990** 项目实施期间被更名为 万维网(World Wide Web)。建立在现有的TCP 和IP 协议之上。它由四个部分组成：

- 文本格式 HTML
- 协议 HTTP
- 客户端 Browser 第一个网络浏览器被称为 WorldWideWeb
- 服务器 Server   即httpd 的前身。

Http 在早期的应用阶段非常简单，后来被称为 HTTP/0.9，有时也叫单行协议（one-line)

## HTTP/0.9 – 单行协议

早期HTTP 协议并没有版本号，为了区分后期的HTTP版本，将其称为0.9 版本。

单行协议及其简单：请求有单行指令构成，只有一个`GET`方法，后面跟目标资源路径。

响应内容也只有简单的文档。无状态码，HTTP头，并且只能返回简单的HTML 文档，当出现错误时，并不会报错，状态码，而是返回一个含有错误原因的HTML文件供用户查看。

## HTTP/1.0 – 构建可扩展性

随着浏览器和服务器的快速发展，HTTP/0.9 不能够满足其需求，于是再1.0 的版本上增加了一下用途。

- 协议的版本号会随着每一个请求发送
- 增加了状态码。
- 引入了HTTP头，无论是请求还是响应，都允许传输元数据。增加了协议的拓展性。
- 由于HTTP 头的增加，使得`Content-Type` 可以添加不同的`MIME` ,用于传输除了HTML 文本文件的其他类型的文档。

在1991-1995年，这些新扩展并没有被引入到标准中以促进协助工作，而仅仅作为一种尝试：服务器和浏览器添加这些新扩展功能，但出现了大量的互操作问题。直到1996年11月，为了解决这些问题，一份新文档（RFC 1945）被发表出来，用以描述如何操作实践这些新扩展功能。文档 RFC **1945** 定义了 HTTP/1.0，但它是狭义的，并不是官方标准。

总结：只是出于实践理论状态，还不够完善。

## HTTP/1.1 – 标准化的协议

由于HTTP/1.0 多种不同的实现方式在运用中显得有些混乱，于是从1995年开始，RFC 1945 发布的下一年就开始修订HTTP 的第一个标准化版本。**1997**年初，HTTP1.1 标准发布。 [RFC 2068](https://tools.ietf.org/html/rfc2068) 

- 连接可以复用，节省了多次打开TCP连接加载网页文档资源的时间。
- 增加管线化技术，允许在第一个应答被完全发送之前就发送第二个请求，以降低通信延迟。
- 支持响应分块。
- 引入额外的缓存控制机制。
- 引入内容协商机制，包括语言，编码，类型，使之让客户端与服务器之间约定以最合适的内容进行交换。
- 引入Host 头，使不同的域名配置在同一个IP 地址的服务器上。



## HTTP的用途

### 安全传输

### 复杂应用

### 放松Web的安全模型



## HTTP/2 - 为了更优异的表现

HTTP/2在HTTP/1.1有几处基本的不同:

- HTTP/2是二进制协议而不是文本协议。不再可读，也不可无障碍的手动创建，改善的优化技术现在可被实施。
- 这是一个复用协议。并行的请求能在同一个链接中处理，移除了HTTP/1.x中顺序和阻塞的约束。
- 压缩了headers。因为headers在一系列请求中常常是相似的，其移除了重复和传输重复数据的成本。
- 其允许服务器在客户端缓存中填充数据，通过一个叫服务器推送的机制来提前请求。



## 总结

### Http/0.9

- 由于初期只用于传输HTML文件，故建立的是持久连接

### Http/1.0

- 由于 `HTTP/0.9` 仅传输HTML 却与服务器保持一直连接，增加了服务器的负担，因此在 `HTTP/1.0` 中将连接改为请求后就断开的连接。
- 增加了头字段

### HTTP/1.1

- 由于 `HTTP/1.0` 增加了头字段，使得`HTTP/1.0` 可传输多样性的文件，但是发现由于对这些文件不断的请求，于是建立了可持久性的HTTP连接。

### HTTP/2

- 虽然`HTTP/1.1` 中的持久化连接降低了所需的连接次数，但是，对于当请求服务器资源时，所有的请求会形成一个队列，只有当前一个请求得到响应后，才会发送下一次请求。而一旦前一个请求由于各种原因未得到响应时，后面的请求就无法发送，这便是著名的 **队头阻塞**问题，虽然`HTTP/1.1` 也尝试使用**管线化**技术来解决这个问题，但是所谓的管线化只是将整批的请求发送给服务器，服务器的响应还是需要按照顺序来回复请求。在`HTTP/2`中引入 **二进制分帧层** 实现了多路复用。
- 压缩头部
- 设置请求优先级